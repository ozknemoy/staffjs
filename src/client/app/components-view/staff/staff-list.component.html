<nav-bar></nav-bar>

<div class="container">
  <div class="row">
    <div class="col-9">
      <pagination-controls (pageChange)="currentPage=$event"
                           maxSize="9"
                           directionLinks="false"
                           autoHide="true"></pagination-controls>

      <table class="table table-sm table-responsive-sm table-bordered">
        <tr>
          <th>Номер</th>
          <th>
            ФИО
            <input type="text" [(ngModel)]="fltr.surname">
          </th>
          <th userRole rights="1"></th>
        </tr>
        <tr *ngFor="let st of staffList | filter : fltr | paginate: { itemsPerPage: 50, currentPage: currentPage}; let i = index">
          <td>{{st.number}}</td>
          <td><a [routerLink]="['../staff-edit', st.id]">
            {{st.surname}} {{st.name}} {{st.middleName}}
          </a></td>
          <td userRole rights="1">
            <button confirmButton (callback)="deleteOne(st.id, i, true)"
                    *ngIf="!isGotFiredState">Удалить сотрудника</button>
            <button confirmButton="В архив?" (callback)="deleteOne(st.id, i, false)"
                    *ngIf="!isGotFiredState">В архив</button>
            <button confirmButton="Восстановить?" (callback)="restoreOne(st.id, i, false)"
                    *ngIf="isGotFiredState">Восстановить сотрудника</button>
          </td>
        </tr>
      </table>

      <pagination-controls (pageChange)="currentPage=$event"
                           maxSize="9"
                           directionLinks="false"
                           autoHide="true"></pagination-controls>
    </div>

    <div class="col-3">
      <button class="btn btn-group-sm btn-warning float-right btn-sm"
              *ngIf="!isGotFiredState"
              (click)="createNewOne()">
        Создать нового сотрудника <i class="fa fa-user-plus"></i>
      </button>
      <div class="clearfix"></div>
      <p>Всего {{amount}}</p>
      <p>Женщин {{amountW}}</p>
      <p>Мужчин {{amountM}}</p>
    </div>
  </div>
</div>
